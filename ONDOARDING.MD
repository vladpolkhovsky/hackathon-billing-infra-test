## Тарифный план считается по следующей формуле

1. Мы собираем меnтрики прометеуса к примеру серваис `echo`
   * Всего 3 вида метрик, которые спращивает наше приложение
     * `sum(container_memory_usage_bytes{pod=~"echo.+"})` - потребление памяти в сумме по подам сервиса echo
     * `sum(rate(container_cpu_usage_seconds_total{pod=~"echo.+"}[1m]))` - потребление процессорного времени в сумме по подам сервиса echo
     * `sum(rate(activator_request_count{revision_name=~"echo.+"}[1m]))` - кол-во запросов к подам в сумме по подам сервиса echo
   * Далее эти метрики складываются в постгрес

2. Бэкенд обращается к постгресу и берёт среднее значение метрик по каждому показателю за указанный промежуток времени.
3. Далее эти средние значения преобразуются к виду за час исполнения, кроме запросов, их точное число нам изместно.
4. Так же считатется шаг для графика.
   * [Реализация](./java-backend/src/main/java/by/faas/billing/service/BillingService.java)